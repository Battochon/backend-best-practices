<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Rate my Backend</title>
    <style>
        * {
            box-sizing: border-box
        }

        html,
        body {
            padding: 0;
            margin: 0;
        }

        body {
            text-align: center;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #4e4e4e;
            overflow-x: hidden;
        }

        h1 {
            width: 100%;
            text-align: center;
            margin: 2rem;
        }

        h2 {
            padding-left: 1rem;
            text-align: left;
        }

        .main-description {
            max-width: 80%;
            margin: 0 auto;
        }

        .item {
            width: 100%;
            height: 3rem;
            background-color: #f5f5f5;
            position: relative;
        }

        .item:hover {
            background-color: #fff;
        }

        .item:hover,
        .item:hover label,
        input[type=submit]:hover {
            cursor: pointer;
        }

        .item-checkbox {
            height: 100%;
            width: 7rem;
            text-align: center;
            display: block;
            background-color: #ffff6a;
        }

        .item-checkbox input {
            height: 100%;
            margin: 0;
        }

        .item label {
            width: 100%;
            height: 100%;
            display: inline-block;
            line-height: 3;
            padding-left: 8rem;
            text-align: left;
            position: absolute;
            top: 0;
            left: 0;
        }

        .item.checked .item-checkbox {
            background-color: #2cdc2c !important;
        }

        .item.mandatory .item-checkbox {
            background-color: #f44;
        }

        .item.recommanded .item-checkbox {
            background-color: #ffbd43;
        }

        input[type=submit] {
            margin: 2rem;
            border: 1px solid #666;
            padding: 1rem;
            background-color: #f0fff0;
            font-size: 1rem;
            outline: none;
        }

        input[type=submit]:hover {
            background-color: #fff;
        }
    </style>
</head>

<body>
    <h1>Rate my Backend</h1>
    <p class="main-description">
        If your CTO thinks its latest architecture is awesome and you don't know how to tell hime it's not, if you are a frontend
        developer and want to check if your backend team is doing the right stuff, if you are a backend developer and want
        to check if you are lacking some best practices, etc... Feel free to use this backend best practices checker ! Ratemyfrontend
        is coming soon.</p>
    <form onsubmit="submitForm(event)">
        <div id="ratingItemsList" class="ratingItemsList">
            <h2>Monitoring</h2>
            <div class="item mandatory" id="item_mon0">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="mon0" id="mon0" value="5">
                </div>
                <label for="mon0">Load balancing monitoring</label>
            </div>
            <div class="item recommanded" id="item_mon1">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="mon1" id="mon1" value="3">
                </div>
                <label for="mon1">Per API endpoint response time</label>
            </div>
            <div class="item recommanded" id="item_mon2">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="mon2" id="mon2" value="3">
                </div>
                <label for="mon2">Per server resources monitoring (CPU, RAM, Disk Space, etc…)</label>
            </div>
            <div class="item" id="item_mon3">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="mon3" id="mon3" value="1">
                </div>
                <label for="mon3">Setup alerts for all previous points</label>
            </div>
            <div class="item" id="item_mon4">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="mon4" id="mon4" value="1">
                </div>
                <label for="mon4">Use asynchronous logging in code</label>
            </div>
            <h2>Security</h2>
            <div class="item mandatory" id="item_sec0">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="sec0" id="sec0" value="5">
                </div>
                <label for="sec0">User’s input sanitization</label>
            </div>
            <div class="item mandatory" id="item_sec1">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="sec1" id="sec1" value="5">
                </div>
                <label for="sec1">Do not store plain text password</label>
            </div>
            <div class="item recommanded" id="item_sec2">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="sec2" id="sec2" value="3">
                </div>
                <label for="sec2">Per API endpoint throttling (mainly login, file uploading, etc…)</label>
            </div>
            <div class="item recommanded" id="item_sec3">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="sec3" id="sec3" value="3">
                </div>
                <label for="sec3">Prefer using BCrypt to hash password</label>
            </div>
            <h2>Performance optimization</h2>
            <div class="item mandatory" id="item_perf0">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="perf0" id="perf0" value="5">
                </div>
                <label for="perf0">Database indexes</label>
            </div>
            <div class="item mandatory" id="item_perf1">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="perf1" id="perf1" value="5">
                </div>
                <label for="perf1">Code Profiling to track down memory leaks</label>
            </div>
            <div class="item mandatory" id="item_perf2">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="perf2" id="perf2" value="5">
                </div>
                <label for="perf2">Use NGinX or Varnish to cache static API requests (not logged users)</label>
            </div>
            <div class="item mandatory" id="item_perf3">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="perf3" id="perf3" value="5">
                </div>
                <label for="perf3">Use Redis to cache dynamic API requests (logged users)</label>
            </div>
            <div class="item recommanded" id="item_perf4">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="perf4" id="perf4" value="3">
                </div>
                <label for="perf4">Use of Redis, no read should be done to the database directly</label>
            </div>
            <div class="item" id="item_perf5">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="perf5" id="perf5" value="1">
                </div>
                <label for="perf5">Use CDN to serve static files</label>
            </div>
            <h2>Industrialization</h2>
            <div class="item mandatory" id="item_indus0">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="indus0" id="indus0" value="5">
                </div>
                <label for="indus0">API Versionning should be carefully handled</label>
            </div>
            <div class="item mandatory" id="item_indus1">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="indus1" id="indus1" value="5">
                </div>
                <label for="indus1">New versions should be packaged from Continuous Integration</label>
            </div>
            <div class="item mandatory" id="item_indus2">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="indus2" id="indus2" value="5">
                </div>
                <label for="indus2">Use of GIT (or mercurial)</label>
            </div>
            <div class="item mandatory" id="item_indus3">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="indus3" id="indus3" value="5">
                </div>
                <label for="indus3">Database versionning should be handled carefully (applying updates or rollbacking versions should be handled)</label>
            </div>
            <div class="item mandatory" id="item_indus4">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="indus4" id="indus4" value="5">
                </div>
                <label for="indus4">API should be 100% tested with unit tests</label>
            </div>
            <div class="item recommanded" id="item_indus5">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="indus5" id="indus5" value="3">
                </div>
                <label for="indus5">The whole solution should be easy to install and deploy</label>
            </div>
            <div class="item recommanded" id="item_indus6">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="indus6" id="indus6" value="3">
                </div>
                <label for="indus6">Application should support Docker</label>
            </div>
            <div class="item recommanded" id="item_indus7">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="indus7" id="indus7" value="3">
                </div>
                <label for="indus7">Each version should be easy to rebuild and redeploy (for emergency fixes or to debug locally)</label>
            </div>
            <h2>Deploy</h2>
            <div class="item mandatory" id="item_dep0">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="dep0" id="dep0" value="5">
                </div>
                <label for="dep0">Every deploy should have a changelog</label>
            </div>
            <div class="item mandatory" id="item_dep1">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="dep1" id="dep1" value="5">
                </div>
                <label for="dep1">Documentation</label>
            </div>
            <div class="item mandatory" id="item_dep2">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="dep2" id="dep2" value="5">
                </div>
                <label for="dep2">Database should be backuped and restore procedure should be tested</label>
            </div>
            <div class="item mandatory" id="item_dep3">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="dep3" id="dep3" value="5">
                </div>
                <label for="dep3">Swagger up-to-date with meaningfull examples</label>
            </div>
            <div class="item recommanded" id="item_dep4">
                <div class="item-checkbox">
                    <input type="checkbox" onchange="handleChecking(event)" name="dep4" id="dep4" value="3">
                </div>
                <label for="dep4">Application rollback procedure written and tested for each deploy</label>
            </div>
        </div>
        <input type="submit" value="Rate my backend">
    </form>

    <script>
        var maxScore = 110; //TODO

        function submitForm(event) {
            event.preventDefault();
            var selectedItems = document.querySelectorAll('input[type="checkbox"]:checked');
            var score = 0;
            for (var k = 0; k < selectedItems.length; k++) {
                score += parseInt(selectedItems[k].value);
            }
            var scorePercent = parseInt(score / maxScore * 100);
            if (scorePercent >= 50) {
                alert('You are good to go live!');
            } else {
                alert('Dude, this is not professional at all.');
            }
        }

        function handleChecking(event) {
            var selectedCheckbox = document.getElementById('item_' + event.target.name);
            if (selectedCheckbox) {
                if (event.target.checked) {
                    selectedCheckbox.className += ' checked';
                } else {
                    selectedCheckbox.className = selectedCheckbox.className.replace(' checked', '');
                }
            }
        }
    </script>

</body>

</html>